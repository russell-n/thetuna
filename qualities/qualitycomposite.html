<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Quality Composite &mdash; The Tuna 2014.07.10 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.3.4/spacelab/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2014.07.10',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/processing.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="The Tuna 2014.07.10 documentation" href="../index.html" />
    <link rel="up" title="Quality Modules" href="index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          The Tuna</a>
        <span class="navbar-text navbar-version pull-left"><b>2014.07.10</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../documentation/developer/index.html">Developer Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation/user/index.html">User Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../log_setter.html">Log Setter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../main.html">The Main Entry Point</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../clients/index.html">Client Connections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../commands/index.html">Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../components/index.html">The Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../explorations/index.html">Explorations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hosts/index.html">Hosts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infrastructure/index.html">The Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimizers/index.html">Optimizers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parts/index.html">The Parts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins/index.html">The Tuna-Plugins</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Quality Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tweaks/index.html">Tweaks</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Quality Composite</a><ul>
<li><a class="reference internal" href="#the-quality-composite">The Quality Composite</a></li>
<li><a class="reference internal" href="#quality-composite-builder">Quality Composite Builder</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../_sources/qualities/qualitycomposite.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="quality-composite">
<h1>Quality Composite<a class="headerlink" href="#quality-composite" title="Permalink to this headline">¶</a></h1>
<p>This is a composite with the call overriden so that it takes arguments and passes them to the components and then retrieves an output and returns it. This assumes that the components take arguments, and can filter out what they need, which is different from the default Component definition. This was implemented so that the composite can pass along tweaked candidates to the components that know what to do with them. This requires that the creator of components for this composite be careful to not have conflicting parameter names, that all components take arguments, even if they don&#8217;t use them, and that only one of the components returns a valid output (because that is all that will be returned). Additionally, unless only one component takes arguments (and even in that case) it will be safer for the caller of the composite to use keyword arguments only.</p>
<div class="section" id="the-quality-composite">
<h2>The Quality Composite<a class="headerlink" href="#the-quality-composite" title="Permalink to this headline">¶</a></h2>
<p class="plantuml">
<img src="../_images/plantuml-27970565400526fc13b92309bbf17ca6a829b521.png" alt="Composite &lt;|-- QualityComposite
Composite : __call__(*args, **kwargs)" />
</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">QualityComposite</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">QualityComposite.__call__</span></code></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="quality-composite-builder">
<h2>Quality Composite Builder<a class="headerlink" href="#quality-composite-builder" title="Permalink to this headline">¶</a></h2>
<p>A convenience class to build quality composites. Builders are turning out to be light-weight versions of plugins (no help for the user).</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">QualityCompositeBuilder</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">QualityCompositeBuilder.product</span></code></td>
<td></td>
</tr>
</tbody>
</table>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">QualityCompositeBuilder</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A builder of quality-composites</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">configuration</span><span class="p">,</span> <span class="n">section_header</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        QualityCompositeBuilder constructor</span>

<span class="sd">        :param:</span>

<span class="sd">         - `configuration`: configuration map with options to build this th</span>
<span class="sd">ing</span>
<span class="sd">         - `section_header`: section in the configuration with values neede</span>
<span class="sd">d</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span> <span class="o">=</span> <span class="n">configuration</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">section_header</span> <span class="o">=</span> <span class="n">section_header</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_product</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">product</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A built Quality Composite</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_product</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">quartermaster</span> <span class="o">=</span> <span class="n">QuarterMaster</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;components&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_product</span> <span class="o">=</span> <span class="n">QualityComposite</span><span class="p">(</span><span class="n">error</span><span class="o">=</span><span class="n">DontCatchError</span><span class="p">,</span>
                                      <span class="n">error_message</span><span class="o">=</span><span class="s2">&quot;Component has failed.&quot;</span>
<span class="p">,</span>
                                      <span class="n">component_category</span><span class="o">=</span><span class="s1">&#39;quality&#39;</span><span class="p">)</span>
            <span class="n">defaults</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">defaults</span>
            <span class="k">if</span> <span class="n">MODULES_SECTION</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">sections</span><span class="p">:</span>
                <span class="n">external_modules</span> <span class="o">=</span> <span class="p">[</span><span class="n">option</span> <span class="k">for</span> <span class="n">option</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span>
<span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">MODULES_SECTION</span><span class="p">)</span>
                                    <span class="k">if</span> <span class="n">option</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">defaults</span><span class="p">]</span>
                <span class="n">quartermaster</span><span class="o">.</span><span class="n">external_modules</span> <span class="o">=</span> <span class="n">external_modules</span>
            <span class="k">for</span> <span class="n">component_section</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">get_list</span><span class="p">(</span><span class="n">section</span><span class="o">=</span><span class="n">se</span>
<span class="n">lf</span><span class="o">.</span><span class="n">section_header</span><span class="p">,</span>
                                                                 <span class="n">option</span><span class="o">=</span><span class="s1">&#39;co</span>
<span class="n">mponents</span><span class="s1">&#39;):</span>
                <span class="n">component_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">section</span><span class="o">=</span><span class="n">component_s</span>
<span class="n">ection</span><span class="p">,</span>
                                                        <span class="n">option</span><span class="o">=</span><span class="s1">&#39;component&#39;</span><span class="p">,</span>

                                                        <span class="n">optional</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="n">component_def</span> <span class="o">=</span> <span class="n">quartermaster</span><span class="o">.</span><span class="n">get_plugin</span><span class="p">(</span><span class="n">component_name</span><span class="p">)</span>
                <span class="n">component</span> <span class="o">=</span> <span class="n">component_def</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="p">,</span>
                                          <span class="n">component_section</span><span class="p">)</span><span class="o">.</span><span class="n">product</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_product</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">component</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_product</span><span class="o">.</span><span class="n">components</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">ConfigurationError</span><span class="p">(</span><span class="s2">&quot;Unable to build quality component</span>
<span class="n">s</span> <span class="n">using</span> <span class="s1">&#39;components=</span><span class="si">{0}</span><span class="s1">&#39;</span><span class="s2">&quot;.format(self.section_header,</span>

                                 <span class="n">option</span><span class="o">=</span><span class="s1">&#39;components&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_product</span>
</pre></div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2014, russell nakamura.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.<br/>
    </p>
  </div>
</footer>
  </body>
</html>